<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dělitelnost čísel</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React Icons (inline SVG)
        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );

        const XCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const BookOpen = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const Calculator = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="16" y1="14" x2="16" y2="14.01"></line>
                <line x1="12" y1="14" x2="12" y2="14.01"></line>
                <line x1="8" y1="14" x2="8" y2="14.01"></line>
                <line x1="16" y1="18" x2="16" y2="18.01"></line>
                <line x1="12" y1="18" x2="12" y2="18.01"></line>
                <line x1="8" y1="18" x2="8" y2="18.01"></line>
            </svg>
        );

        function DelitelnostApp() {
          const [mode, setMode] = useState('learn');
          const [number, setNumber] = useState('');
          const [divisor, setDivisor] = useState(2);
          const [practiceNumber, setPracticeNumber] = useState(0);
          const [userAnswer, setUserAnswer] = useState('');
          const [feedback, setFeedback] = useState('');
          const [score, setScore] = useState(0);
          const [attempts, setAttempts] = useState(0);
          const [difficulty, setDifficulty] = useState('medium');

          const divisibilityRules = {
            2: "Číslo je dělitelné 2, pokud je poslední cifra sudá (0, 2, 4, 6, 8).",
            3: "Číslo je dělitelné 3, pokud je ciferný součet dělitelný 3.",
            4: "Číslo je dělitelné 4, pokud jsou poslední 2 cifry dělitelné 4.",
            5: "Číslo je dělitelné 5, pokud končí na 0 nebo 5.",
            6: "Číslo je dělitelné 6, pokud je dělitelné 2 i 3 zároveň.",
            8: "Číslo je dělitelné 8, pokud jsou poslední 3 cifry dělitelné 8.",
            9: "Číslo je dělitelné 9, pokud je ciferný součet dělitelný 9.",
            10: "Číslo je dělitelné 10, pokud končí na 0."
          };

          const checkDivisibility = (num, div) => {
            const n = parseInt(num);
            const d = parseInt(div);
            
            if (isNaN(n) || n === 0) return { divisible: false, explanation: '' };
            
            const isDivisible = n % d === 0;
            let explanation = '';
            
            switch(d) {
              case 2:
  const lastDigit = Math.abs(n) % 10;
  explanation = `Poslední cifra je ${lastDigit}, což je ${lastDigit % 2 === 0 ? 'sudé' : 'liché'} číslo.`;
  break;
              case 3:
                const sum3 = Math.abs(n).toString().split('').reduce((a, b) => a + parseInt(b), 0);
                explanation = `Ciferný součet: ${Math.abs(n).toString().split('').join(' + ')} = ${sum3}. ${sum3} ${sum3 % 3 === 0 ? 'je' : 'není'} dělitelné 3.`;
                break;
              case 4:
                const last2 = Math.abs(n) % 100;
                explanation = `Poslední 2 cifry: ${last2}. ${last2} ${last2 % 4 === 0 ? 'je' : 'není'} dělitelné 4.`;
                break;
              case 5:
                const last5 = Math.abs(n) % 10;
                explanation = `Poslední cifra je ${last5}, což ${last5 === 0 || last5 === 5 ? 'je' : 'není'} 0 nebo 5.`;
                break;
              case 6:
                const div2 = n % 2 === 0;
                const sum6 = Math.abs(n).toString().split('').reduce((a, b) => a + parseInt(b), 0);
                const div3 = sum6 % 3 === 0;
                explanation = `Dělitelné 2: ${div2 ? 'ANO' : 'NE'}, Dělitelné 3: ${div3 ? 'ANO' : 'NE'}. Musí platit obojí.`;
                break;
              case 8:
                const last3 = Math.abs(n) % 1000;
                explanation = `Poslední 3 cifry: ${last3}. ${last3} ${last3 % 8 === 0 ? 'je' : 'není'} dělitelné 8.`;
                break;
              case 9:
                const sum9 = Math.abs(n).toString().split('').reduce((a, b) => a + parseInt(b), 0);
                explanation = `Ciferný součet: ${Math.abs(n).toString().split('').join(' + ')} = ${sum9}. ${sum9} ${sum9 % 9 === 0 ? 'je' : 'není'} dělitelné 9.`;
                break;
              case 10:
                const last10 = Math.abs(n) % 10;
                explanation = `Poslední cifra je ${last10}, což ${last10 === 0 ? 'je' : 'není'} 0.`;
                break;
            }
            
            return { divisible: isDivisible, explanation };
          };

          const generatePracticeNumber = () => {
            let min, max;
            switch(difficulty) {
              case 'easy':
                min = 10;
                max = 99;
                break;
              case 'medium':
                min = 100;
                max = 999;
                break;
              case 'hard':
                min = 1000;
                max = 9999;
                break;
              default:
                min = 100;
                max = 999;
            }
            const newNumber = Math.floor(Math.random() * (max - min + 1)) + min;
            setPracticeNumber(newNumber);
            setUserAnswer('');
            setFeedback('');
          };

          useEffect(() => {
            if (mode === 'practice' && practiceNumber === 0) {
              generatePracticeNumber();
            }
          }, [mode]);

       const handlePracticeCheck = (answer) => {
  const correct = checkDivisibility(practiceNumber, divisor);
  const userSaysYes = answer === 'ano';
  
  setAttempts(prev => prev + 1);
  
  if ((correct.divisible && userSaysYes) || (!correct.divisible && !userSaysYes)) {
    setFeedback('correct');
    setScore(prev => prev + 1);
    setTimeout(() => {
      generatePracticeNumber();
    }, 2000);
  } else {
    setFeedback('incorrect');
    setTimeout(() => {
      setFeedback('');
    }, 2000);
  }
};

          const result = number ? checkDivisibility(number, divisor) : null;

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
              <div className="max-w-4xl mx-auto">
                <h1 className="text-4xl font-bold text-center text-indigo-900 mb-8">
                  Dělitelnost čísel
                </h1>

                <div className="flex gap-4 mb-8 justify-center">
                  <button
                    onClick={() => setMode('learn')}
                    className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${
                      mode === 'learn'
                        ? 'bg-indigo-600 text-white shadow-lg scale-105'
                        : 'bg-white text-indigo-600 hover:bg-indigo-50'
                    }`}
                  >
                    <BookOpen size={20} />
                    Výuka
                  </button>
                  <button
                    onClick={() => setMode('practice')}
                    className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${
                      mode === 'practice'
                        ? 'bg-indigo-600 text-white shadow-lg scale-105'
                        : 'bg-white text-indigo-600 hover:bg-indigo-50'
                    }`}
                  >
                    <Calculator size={20} />
                    Procvičování
                  </button>
                </div>

                {mode === 'learn' ? (
                  <div className="bg-white rounded-2xl shadow-xl p-8">
                    <h2 className="text-2xl font-bold text-indigo-800 mb-6">Znaky dělitelnosti</h2>
                    
                    <div className="mb-6">
                      <label className="block text-lg font-semibold text-gray-700 mb-3">
                        Vyber dělitele:
                      </label>
                      <div className="grid grid-cols-4 gap-3">
                        {[2, 3, 4, 5, 6, 8, 9, 10].map((d) => (
                          <button
                            key={d}
                            onClick={() => setDivisor(d)}
                            className={`py-3 rounded-lg font-bold transition-all ${
                              divisor === d
                                ? 'bg-indigo-600 text-white shadow-lg scale-105'
                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }`}
                          >
                            {d}
                          </button>
                        ))}
                      </div>
                    </div>

                    <div className="bg-indigo-50 border-l-4 border-indigo-600 p-4 mb-6">
                      <h3 className="font-bold text-indigo-900 mb-2">Pravidlo dělitelnosti číslem {divisor}:</h3>
                      <p className="text-indigo-800">{divisibilityRules[divisor]}</p>
                    </div>

                    <div className="mb-6">
                      <label className="block text-lg font-semibold text-gray-700 mb-3">
                        Zadej číslo:
                      </label>
                      <input
                        type="number"
                        value={number}
                        onChange={(e) => setNumber(e.target.value)}
                        placeholder="např. 1234"
                        className="w-full px-4 py-3 text-2xl border-2 border-gray-300 rounded-lg focus:border-indigo-600 focus:outline-none"
                      />
                    </div>

                    {result && number && (
                      <div className={`p-6 rounded-lg ${
                        result.divisible ? 'bg-green-50 border-2 border-green-500' : 'bg-red-50 border-2 border-red-500'
                      }`}>
                        <div className="flex items-center gap-3 mb-3">
                          {result.divisible ? (
                            <>
                              <CheckCircle size={32} className="text-green-600" />
                              <span className="text-2xl font-bold text-green-800">
                                {number} JE dělitelné {divisor}
                              </span>
                            </>
                          ) : (
                            <>
                              <XCircle size={32} className="text-red-600" />
                              <span className="text-2xl font-bold text-red-800">
                                {number} NENÍ dělitelné {divisor}
                              </span>
                            </>
                          )}
                        </div>
                        <p className="text-lg text-gray-700">{result.explanation}</p>
                      </div>
                    )}
                  </div>
                ) : (
                  <div className="bg-white rounded-2xl shadow-xl p-8">
                    <div className="flex justify-between items-center mb-6">
                      <h2 className="text-2xl font-bold text-indigo-800">Procvičování</h2>
                      <div className="text-right">
                        <div className="text-sm text-gray-600">Skóre</div>
                        <div className="text-2xl font-bold text-indigo-600">
                          {score} / {attempts}
                        </div>
                      </div>
                    </div>

                    <div className="mb-6">
                      <label className="block text-lg font-semibold text-gray-700 mb-3">
                        Obtížnost:
                      </label>
                      <div className="grid grid-cols-3 gap-3">
                        <button
                          onClick={() => {
                            setDifficulty('easy');
                            generatePracticeNumber();
                          }}
                          className={`py-3 rounded-lg font-bold transition-all ${
                            difficulty === 'easy'
                              ? 'bg-green-600 text-white shadow-lg scale-105'
                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          }`}
                        >
                          Lehká (2 cifry)
                        </button>
                        <button
                          onClick={() => {
                            setDifficulty('medium');
                            generatePracticeNumber();
                          }}
                          className={`py-3 rounded-lg font-bold transition-all ${
                            difficulty === 'medium'
                              ? 'bg-yellow-600 text-white shadow-lg scale-105'
                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          }`}
                        >
                          Střední (3 cifry)
                        </button>
                        <button
                          onClick={() => {
                            setDifficulty('hard');
                            generatePracticeNumber();
                          }}
                          className={`py-3 rounded-lg font-bold transition-all ${
                            difficulty === 'hard'
                              ? 'bg-red-600 text-white shadow-lg scale-105'
                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          }`}
                        >
                          Těžká (4 cifry)
                        </button>
                      </div>
                    </div>

                    <div className="mb-6">
                      <label className="block text-lg font-semibold text-gray-700 mb-3">
                        Procvičuješ dělitelnost číslem:
                      </label>
                      <div className="grid grid-cols-4 gap-3">
                        {[2, 3, 4, 5, 6, 8, 9, 10].map((d) => (
                          <button
                            key={d}
                            onClick={() => {
                              setDivisor(d);
                              generatePracticeNumber();
                            }}
                            className={`py-3 rounded-lg font-bold transition-all ${
                              divisor === d
                                ? 'bg-indigo-600 text-white shadow-lg scale-105'
                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }`}
                          >
                            {d}
                          </button>
                        ))}
                      </div>
                    </div>

                    <div className="bg-gradient-to-r from-indigo-100 to-purple-100 p-8 rounded-lg mb-6">
                      <p className="text-center text-xl mb-4 text-gray-700">
                        Je číslo
                      </p>
                      <p className="text-center text-5xl font-bold text-indigo-900 mb-4">
                        {practiceNumber}
                      </p>
                      <p className="text-center text-xl text-gray-700">
                        dělitelné číslem {divisor}?
                      </p>
                    </div>

                    {!feedback && (
                      <div className="grid grid-cols-2 gap-4 mb-4">
                        <button
                          onClick={() => {
  setUserAnswer('ano');
  handlePracticeCheck('ano');
}}
                          className="py-6 bg-green-500 hover:bg-green-600 text-white text-2xl font-bold rounded-lg transition-all transform hover:scale-105"
                        >
                          ANO
                        </button>
                        <button
                       onClick={() => {
  setUserAnswer('ne');
  handlePracticeCheck('ne');
}}
                          className="py-6 bg-red-500 hover:bg-red-600 text-white text-2xl font-bold rounded-lg transition-all transform hover:scale-105"
                        >
                          NE
                        </button>
                      </div>
                    )}

                    {feedback && (
                      <div className={`p-6 rounded-lg mb-4 ${
                        feedback === 'correct' ? 'bg-green-100 border-2 border-green-500' : 'bg-red-100 border-2 border-red-500'
                      }`}>
                        <div className="flex items-center justify-center gap-3">
                          {feedback === 'correct' ? (
                            <>
                              <CheckCircle size={40} className="text-green-600" />
                              <span className="text-2xl font-bold text-green-800">Správně! 🎉</span>
                            </>
                          ) : (
                            <>
                              <XCircle size={40} className="text-red-600" />
                              <span className="text-2xl font-bold text-red-800">Zkus to znovu!</span>
                            </>
                          )}
                        </div>
                        {feedback === 'correct' && (
                          <p className="text-center mt-2 text-gray-600">
                            {checkDivisibility(practiceNumber, divisor).explanation}
                          </p>
                        )}
                      </div>
                    )}

                    <button
                      onClick={generatePracticeNumber}
                      className="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg transition-all"
                    >
                      Nové číslo
                    </button>
                  </div>
                )}
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DelitelnostApp />);
    </script>
</body>
</html>
